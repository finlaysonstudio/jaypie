---
version: 1.2.12
date: 2026-02-05
summary: Fix non-streaming expressHandler endpoints hanging in Lambda streaming mode
---

## Fixes

- **Lambda Streaming**: Fixed `expressHandler` endpoints that return data (non-streaming) hanging when used with `createLambdaStreamHandler`. The issue was that `safeSendJson()` called `flushHeaders()` before setting `content-type`, causing the JSON response to never be properly delivered to Lambda's response stream.

## Technical Details

The fix ensures proper order of operations for Lambda streaming responses:
1. Set status code
2. Set `content-type: application/json` header
3. Flush headers to initialize the Lambda stream wrapper
4. Write JSON data directly via `res.end()` instead of `res.json()`

This allows applications to use both streaming (SSE) and non-streaming (REST API) endpoints in the same Express app with `createLambdaStreamHandler`.

Fixes #187
