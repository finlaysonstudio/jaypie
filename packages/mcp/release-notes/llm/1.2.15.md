---
version: 1.2.15
date: 2026-02-24
summary: Fix stale socket error guard timing gap in retry executor
---

## Changes

- Widen `unhandledRejection` guard in `RetryExecutor` and `StreamLoop` to cover the entire retry loop after first failure, not just the sleep window
- Prevents `TypeError: terminated` (undici socket teardown) from escaping as unhandled rejections during hook calls and subsequent retry attempts
- Guard is now installed immediately after `controller.abort()` and cleaned up in `finally` when execution completes
