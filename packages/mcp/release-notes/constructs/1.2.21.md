---
version: 1.2.21
date: 2025-01-25
summary: Properly fix grantManageConnections IAM permission for all methods
---

## Bug Fixes

### JaypieWebSocket.grantManageConnections

Fixed `grantManageConnections()` to properly delegate to the CDK's built-in `WebSocketApi.grantManageConnections()` method.

**Before (1.2.20)**: The custom implementation generated an ARN with `/POST/@connections/*`, which only allowed POST operations (sending messages) but blocked GET (get connection info) and DELETE (disconnect client) operations.

**After (1.2.21)**: Delegates to CDK's implementation which generates `/*/*/@connections/*` (wildcard for stage and method), enabling all Management API operations.

This matches the behavior described in the [AWS CDK documentation](https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.aws_apigatewayv2.WebSocketApi.html#grantmanageconnectionsgrantee).

Fixes #151
